<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>The Theory and Technique of Electronic Music Exercises in Ad Libitum</title>
<!-- 2017-10-16 Mon 11:46 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Ruslan Prakapchuk" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">The Theory and Technique of Electronic Music Exercises in Ad Libitum</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Sinusoids, amplitude and frequency</a>
<ul>
<li><a href="#sec-1-1">1.1. Measures of Amplitude</a></li>
<li><a href="#sec-1-2">1.2. Units of Amplitude</a></li>
<li><a href="#sec-1-3">1.3. Controlling Amplitude</a></li>
<li><a href="#sec-1-4">1.4. Frequency</a></li>
<li><a href="#sec-1-5">1.5. Synthesizing a sinusoid</a></li>
<li><a href="#sec-1-6">1.6. Superposing Signals</a></li>
<li><a href="#sec-1-7">1.7. Periodic Signals</a></li>
<li><a href="#sec-1-8">1.8. About the Software Examples</a></li>
<li><a href="#sec-1-9">1.9. Examples</a></li>
<li><a href="#sec-1-10">1.10. Exercises</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Wavetables and samplers</a>
<ul>
<li><a href="#sec-2-1">2.1. The Wavetable Oscillator</a></li>
<li><a href="#sec-2-2">2.2. Sampling</a></li>
<li><a href="#sec-2-3">2.3. Enveloping samplers</a></li>
<li><a href="#sec-2-4">2.4. Timbre stretching</a></li>
<li><a href="#sec-2-5">2.5. Interpolation</a></li>
<li><a href="#sec-2-6">2.6. Examples</a></li>
<li><a href="#sec-2-7">2.7. Exercises</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
It's my exercise book for studying "The Theory and Technique of Electronic
Music" by Miller Puckette. Work is done in Ad Libitum instead of PureData, and
some pieces of code migrate back to Ad Libitum standard library.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Sinusoids, amplitude and frequency</h2>
<div class="outline-text-2" id="text-1">
<p>
Ad Libitum deals with continous representation of time, it's expressed as a
float number of seconds passed from the stream start. For any signal either
continous or discrete feels more natural, and there is no clear measure of
their shares. Good news that conversion is relatively easy in both directions.
</p>

<p>
<code>~&lt;</code> is a syntax sugar which wraps code into function of two parameters:
<code>time</code> and <code>channel</code>, which are thrown in scope. Such kind of function is how
Ad Libitum represents audio signals. Think about time as a continuous
counterpart of sample number <code>n</code> in TTEM. <code>channel</code> will be discussed later.
Think about <code>~&lt;</code> as the thing which animates your formula to produce signal.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (sinusoid a ω φ) (~&lt; (* a (cos (+ (* ω time) φ)))))
</pre>
</div>

<p>
<code>play!</code> connects your signal to audio output and you can hear it! Amplitude
range in Ad Libitum is [-1, 1], setting a=0.2 we are producing signal in 1/5
of it.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(play! (sinusoid 0.2 2000.0 0.0))
</pre>
</div>

<p>
And the most important function in Ad Libitum — <code>h!</code> hush!
</p>

<div class="org-src-container">

<pre class="src src-scheme">(h!)
</pre>
</div>

<p>
Let's make sinusoid to receive regular frequency instead of angular one.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (ƒ→ω ƒ)
  (* 2π ƒ))

(define (ω→ƒ ω)
  (/ ω 2π))

(define (sinusoid a ƒ φ)
  (~&lt; (* a (cos (+ (* (ƒ→ω ƒ) time) φ)))))

(play! (sinusoid 0.2 440.0 0.0))
(h!)
</pre>
</div>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Measures of Amplitude</h3>
<div class="outline-text-3" id="text-1-1">
<p>
This is not a blood pact, but many of Ad Libitum code relies on fact that
audiosignal is called sample by sample, without skips. Making that assumption
we are able to write RMS amplitude measurement even in continuous
representation of time.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (rms-amplitude window-width s)
  (let ([windows (make-vector *channels*)]
	[N (-&gt; window-width (* *sample-rate*) (ceiling) (exact))]
	[cursor -1])
    (do-ec (: i *channels*)
	   (vector-set! windows i (make-vector N 0.0)))
    (~&lt;
     (when (zero? channel)
       (set! cursor (mod (+ cursor 1) N)))
     (let ([window (vector-ref windows channel)]
	   [x 0.0])
       (vector-set! window cursor (&lt;~ s))
       (vector-for-each (λ (y) (set! x (+ x (* y y)))) window)
       (sqrt (/ x N))))))
</pre>
</div>

<p>
Let's make sinusoid amplitude a signal, and set it to rms amplitude measured
from sinusoid with peak amplitude 1.0
Note <code>&lt;~</code> syntax sugar to apply audiosignal function to time and channel.
<code>(&lt;~ a)</code> is equivalent to <code>(a time channel)</code>
Also note how we make constant signal with <code>(~&lt; 1.0)</code>
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (sinusoid a ƒ φ)
  (~&lt; (* (&lt;~ a) (cos (+ (* (ƒ→ω ƒ) time) φ)))))
</pre>
</div>

<p>
Note that computing rms in realtime is very expensive.
Try to increase window width until you get audio buffer underflow glitches.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(play! (sinusoid (rms-amplitude 2/440 (sinusoid (~&lt; 1.0) 440.0 0.0)) 440.0 0.0))
(h!)
</pre>
</div>

<p>
Compare with 1.0 peak itself, it's louder!
</p>

<div class="org-src-container">

<pre class="src src-scheme">(play! (sinusoid (~&lt; 1.0) 440.0 0.0))
(h!)
</pre>
</div>

<p>
Let's throttle <code>rms-amplitude</code> to make it less hungry
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (rms-amplitude window-width s)
  (let ([windows (make-vector *channels*)]
	[N (-&gt; window-width (* *sample-rate*) (ceiling) (exact))]
	[cursor -1]
	[amplitudes (make-vector *channels* 0.0)])
    (do-ec (: i *channels*)
	   (vector-set! windows i (make-vector N 0.0)))
    (~&lt;
     (when (zero? channel)
       (set! cursor (mod (+ cursor 1) N)))
     (let ([window (vector-ref windows channel)])
       (vector-set! window cursor (&lt;~ s))
       (when (zero? cursor)
	 (vector-set!
	  amplitudes
	  channel
	  (let ([x 0.0])
	    (vector-for-each (λ (y) (set! x (+ x (* y y)))) window)
	    (sqrt (/ x N))))))
     (vector-ref amplitudes channel))))

(play! (sinusoid (rms-amplitude 1 (+~ (sinusoid (~&lt; 1.0) 440.0 0.0))) 440.0 0.0))
(h!)
</pre>
</div>

<p>
Chez Scheme GC is so cool that though we produce a lot of garbage every
second it doesn't interrupt sound! But we still have a noticeable lag on
window initialization. Take it into account if you are going to spawn
capacitive <code>rms-amplitude</code> signals frequently.
</p>

<p>
In future for sinusoid we will use built-in Ad Libitum oscillator available
as <code>osc:sine</code> (takes phasor signal as input, we'll cover it later) and
<code>osc:sine///</code> (takes frequency and optional initial phase).
</p>

<div class="org-src-container">

<pre class="src src-scheme">(play! (osc:sine (osc:phasor 440.0 0.0)))
(play! (osc:sine/// 440.0 0.0))
(h!)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Units of Amplitude</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Convert amplitude to decibels, with a0 = 1e-5 as suggested in TTEM
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (amp-&gt;dB x)
  (* 20.0 (log (* x 1e5) 10.0)))

(amp-&gt;dB 1.0)
(amp-&gt;dB 0.5)
</pre>
</div>

<p>
But setting a0 to 1.0 is also very convenient — maximum amplitude is then 0dB
and any one below is just negative. All relations stays the same.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (amp-&gt;dB x)
  (* 20.0 (log x 10.0)))

(amp-&gt;dB 0.5)
(amp-&gt;dB 1e-5)
</pre>
</div>

<p>
And convert decibels back to amplitude:
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (dB-&gt;amp x)
  (expt 10.0 (/ x 20.0)))

(dB-&gt;amp -100.0)
(dB-&gt;amp -50.0)
(dB-&gt;amp -10.0)
(dB-&gt;amp 0.0)
</pre>
</div>

<p>
Amplitude is related in an inexact way to the perceived loudness of a sound.
In general, two signals with the same peak or RMS amplitude won’t necessarily
have the same loudness at all. But amplifying a signal by 3 dB, say, will
fairly reliably make it sound about one “step” louder.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define *volume-step-dB* 3.0)
</pre>
</div>

<p>
Let's test it!
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (sinusoid a ƒ φ)
  (~&lt; (* a (cos (+ (* (ƒ→ω ƒ) time) φ)))))
(play! (sinusoid (dB-&gt;amp -10.0) 440.0 0.0))
(play! (sinusoid (dB-&gt;amp (- 10.0 *volume-step-dB*)) 440.0 0.0))
(h!)
</pre>
</div>

<p>
Try to change step. For that wave personally I hear 2dB difference.
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Controlling Amplitude</h3>
<div class="outline-text-3" id="text-1-3">
<p>
We already controlled amplitude by multiplying every sample by <code>a</code>
Let's do it by multiplying sinusoid by constant signal.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(play! (*~ (~&lt; 0.5) (osc:sine/// 440.0)))
(play! (*~ (~&lt; 0.2) (osc:sine/// 440.0)))
(h!)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Frequency</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">

<pre class="src src-scheme">(define (midi-pitch-&gt;frequency m)
  (* 440.0 (expt 2.0 (/ (- m 69.0) 12.0))))

(define (frequency-&gt;midi-pitch f)
  (+ 69 (exact (round (* 12.0 (log (/ f 440.0) 2.0))))))

(play! (osc:sine/// (midi-pitch-&gt;frequency 69)))
(play! (osc:sine/// (midi-pitch-&gt;frequency 72)))
(h!)
</pre>
</div>

<p>
Ad Libitum allows you to use MIDI controller. Support is still incomplete and
relies on many assumptions. Your MIDI input device should be connected and
identified as the first one.
<code>now</code> is Ad Libitum clock function. It's required for MIDI module to put
proper timestamps on events.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(midi:start now)
</pre>
</div>

<p>
Let's defined so called control signal for our frequency. We'll speak about
control signals later, but putting it simply, control signal is an audio
signal which is updated in non-audio rate by calling its setter.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define-values (frequency set-frequency!) (ctrl:make-control 440.0))
</pre>
</div>

<p>
Let's set callback which will be called for every control change MIDI event.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(midi:set-cc! (λ (t knob value channel)
		(set-frequency! (midi-pitch-&gt;frequency value))))

(play! (osc:sine/// frequency))
(h!)
</pre>
</div>

<p>
Notice that abrupt change of frequency cause "pops" discussed in TTEM 1.5
</p>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Synthesizing a sinusoid</h3>
<div class="outline-text-3" id="text-1-5">
<p>
To make transition smooth we could use built-in <code>env:linear-transition</code>
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define-values (frequency set-frequency!) (ctrl:make-control 440.0))

(play! (osc:sine/// (env:linear-transition (~&lt; 0.05) frequency)))
(h!)
</pre>
</div>

<p>
Besides of using MIDI input we could make frequency change programmatically.
<code>schedule</code> allows you to call any function later at given point of time.
Any function could schedule itself. It is called temporal recursion.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (swap-frequency i)
  (if (zero? i)
      (set-frequency! 440.0)
      (set-frequency! 220.0))
  (schedule (+ (now) 1/4) 'swap-frequency (- 1 i)))

(swap-frequency 0)

(play! (osc:sine/// frequency))
(play! (osc:sine/// (env:linear-transition (~&lt; 0.05) frequency)))
(play! (osc:sine/// (env:quadratic-transition (~&lt; 0.05) frequency)))
(h!)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Superposing Signals</h3>
<div class="outline-text-3" id="text-1-6">
<p>
To superpose signals in Ad Libitum signal sum operator <code>+~</code> is available.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(play! (+~ (*~ (~&lt; 0.5) (osc:sine/// (midi-pitch-&gt;frequency 69)))
	   (*~ (~&lt; 0.5) (osc:sine/// (midi-pitch-&gt;frequency 72)))))
(h!)
</pre>
</div>

<p>
Let's measure how peak and rms amplitude of sinusoids superposition relates
to sum of their amplitudes.
</p>

<p>
For that we need to define <code>peak-amplitude</code> signal.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (peak-amplitude signal)
  (let ([peaks (make-vector *channels* 0.0)])
    (~&lt;
     (let* ([sample (&lt;~ signal)]
	    [peak (max sample (vector-ref peaks channel))])
       (vector-set! peaks channel peak)
       peak))))
</pre>
</div>

<p>
Because Ad Libitum signals are kind of pull FRP, we can't just wrap our
signal with <code>rms-amplitude</code> and then play initial signal and have RMS one
updated. Let's define useful signal which keep signals given to it updated,
but plays only first one.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (solo audio . muted)
  (~&lt;
   (for-each (cut &lt;&gt; time channel) muted)
   (&lt;~ audio)))
</pre>
</div>

<p>
Uncorrelated signals.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define signal-1 (*~ (~&lt; 0.5) (osc:sine/// (midi-pitch-&gt;frequency 69))))
(define signal-2 (*~ (~&lt; 0.5) (osc:sine/// (midi-pitch-&gt;frequency 72))))

(define superposed-signal (+~ signal-1 signal-2))

;; signal-1 and signal-2 peaks are obviously 0.5
(define measure-peak (peak-amplitude superposed-signal))

(define measure-rms-signal-1-2 (rms-amplitude 0.1 signal-1))
(define measure-rms (rms-amplitude 0.1 superposed-signal))

(play! (solo superposed-signal measure-peak measure-rms measure-rms-signal-1-2))
(h!)

(measure-peak 0.0 0) ;; =&gt; 0.9999931184993082
(measure-rms 0.0 0) ;; =&gt; 0.5038381755150125
(measure-rms-signal-1-2 0.0 0) ;; =&gt; 0.3535533905956031
</pre>
</div>

<p>
Correlated signals.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define signal-1 (*~ (~&lt; 0.5) (osc:sine/// 440.0)))
(define signal-2 (*~ (~&lt; 0.5) (osc:sine/// 440.0)))

(define superposed-signal (+~ signal-1 signal-2))

;; signal-1 and signal-2 peaks are obviously 0.5
(define measure-peak (peak-amplitude superposed-signal))

(define measure-rms-signal-1-2 (rms-amplitude 0.1 signal-1))
(define measure-rms (rms-amplitude 0.1 superposed-signal))

(play! (solo superposed-signal measure-peak measure-rms measure-rms-signal-1-2))
(h!)

(measure-peak 0.0 0) ;; =&gt; 1.0
(measure-rms 0.0 0) ;; =&gt; 0.7071067811829478
(measure-rms-signal-1-2 0.0 0) ;; =&gt; 0.3535533905914739
</pre>
</div>

<p>
To be honest, trick with <code>solo</code> points to drawbacks in <code>rms-amplitude</code> and
<code>peak-amplitude</code> design. It would be better for them to just proxy input
signal and provide some accessor to measurement result.
</p>

<div class="org-src-container">

<pre class="src src-scheme">(define (peak-amplitude signal)
  (let ([peaks (make-vector *channels* 0.0)])
    (values
     (~&lt;
      (let* ([sample (&lt;~ signal)]
	     [peak (max sample (vector-ref peaks channel))])
	(vector-set! peaks channel peak)
	sample))
     (λ () peaks))))

(define (window width signal)
  (let ([windows (make-vector *channels*)]
	[N (-&gt; width (* *sample-rate*) (ceiling) (exact))]
	[cursor -1])
    (do-ec (: i *channels*)
	   (vector-set! windows i (make-vector N 0.0)))
    (values
     (~&lt;
      (when (zero? channel)
	(set! cursor (mod (+ cursor 1) N)))
      (let ([sample (&lt;~ signal)]
	    [window (vector-ref windows channel)])
	(vector-set! window cursor sample)
	sample))
     (λ () windows))))

(define (rms-amplitude window-width signal)
  (let-values ([(signal windows) (window window-width signal)])
    (values
     signal
     (λ ()
       (vector-map
	(λ (window)
	  (let ([x 0.0])
	    (vector-for-each (λ (y) (set! x (+ x (* y y)))) window)
	    (sqrt (/ x (vector-length window)))) )
	(windows))))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-scheme">(define signal-1 (*~ (~&lt; 0.5) (osc:sine/// (midi-pitch-&gt;frequency 69))))
(define signal-2 (*~ (~&lt; 0.5) (osc:sine/// (midi-pitch-&gt;frequency 72))))

(define superposed-signal (+~ signal-1 signal-2))

(define-values (superposed-signal measure-peak) (peak-amplitude superposed-signal))
(define-values (superposed-signal measure-rms) (rms-amplitude 0.1 superposed-signal))

(play! superposed-signal)
(h!)

(measure-peak)
(measure-rms)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Periodic Signals</h3>
</div>
<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> About the Software Examples</h3>
</div>
<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Examples</h3>
</div>
<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Exercises</h3>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Wavetables and samplers</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> The Wavetable Oscillator</h3>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Sampling</h3>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Enveloping samplers</h3>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Timbre stretching</h3>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Interpolation</h3>
</div>
<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Examples</h3>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> Exercises</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Ruslan Prakapchuk</p>
<p class="date">Created: 2017-10-16 Mon 11:46</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
